#upload jar to S3
aws s3 cp --region us-west-1 target/dist-ga-01.00-job.jar s3://dino.ga/dist-ga-01.00-job.jar

#upload sample file
aws s3 cp --region us-west-1 log.log s3://dino.ga/input/

#run identity job
aws emr create-cluster --name "GL Identity" --release-label emr-4.2.0 --log-uri s3://dino.ga/logs/ --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m1.medium --instance-count 1 --steps Type=CUSTOM_JAR,Name="Identity Job",ActionOnFailure=TERMINATE_CLUSTER,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.IdentityJob","-D","mapreduce.framework.name=yarn","-D","mapreduce.output.fileoutputformat.outputdir=s3://dino.ga/output/2","-D","mapred.output.dir=s3://dino.ga/output/2","-D","mapred.input.dir=s3://dino.ga/input","-D","mapreduce.inputformat.class=org.apache.hadoop.mapreduce.lib.input.TextInputFormat","-D","mapreduce.outputformat.class=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat","-D","mapreduce.map.class=edu.ibu.ga.mapreduce.IdentityMapper","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.IdentityReducer","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.IdentityReducer","-D","mapred.output.value.class=org.apache.hadoop.io.Text","-D","mapred.output.key.class=org.apache.hadoop.io.LongWritable","-D","mapred.mapoutput.value.class=org.apache.hadoop.io.IntWritable","-D","mapred.output.key.class=org.apache.hadoop.io.Text"]

#run distributed ga job (one max)
aws emr create-cluster --name "GL GA" --release-label emr-4.2.0 --log-uri s3://dino.ga/logs/ --enable-debugging --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m1.medium --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=CANCEL_AND_WAIT,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.DgaJob","-D","mapreduce.framework.name=yarn","-D","mapreduce.inputformat.class=edu.ibu.ga.mapreduce.DgaInputFormat","-D","mapreduce.outputformat.class=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat","-D","mapreduce.map.class=edu.ibu.ga.mapreduce.DgaMapper","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.DgaReducer","-D","mapred.output.value.class=org.apache.hadoop.io.NullWritable","-D","mapred.output.key.class=org.apache.hadoop.io.NullWritable","-D","mapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome","-D","mapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable","-D","mapred.reduce.tasks=1","-D","ga.mapreduce.number.of.mappers=2","-D","mapred.input.dir=s3://dino.ga/input/","-D","ga.mapreduce.output.location=s3://dino.ga/output/dga","-D","ga.mapreduce.population.size.per.node=50","-D","ga.mapreduce.chromosome.length=10","-D","ga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.RandomChromosomeGenerator","-D","ga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator","-D","ga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover","-D","ga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator","-D","ga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection","-D","ga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.SimpleFitnessFunction","-D","ga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria","-D","ga.mapreduce.number.of.generations=10","-D","ga.mapreduce.mutation.probability=0.05","-D","ga.mapreduce.crossover.probability=0.8","-D","io.serializations=org.apache.hadoop.io.serializer.JavaSerialization\,org.apache.hadoop.io.serializer.WritableSerialization"]


#run distributed ga job (dga-svm)
aws emr create-cluster --name "GL GA" --release-label emr-4.2.0 --log-uri s3://dino.ga/logs/ --enable-debugging --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m1.medium --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=CANCEL_AND_WAIT,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.DgaJob","-D","mapreduce.framework.name=yarn","-D","mapreduce.inputformat.class=edu.ibu.ga.mapreduce.DgaInputFormat","-D","mapreduce.outputformat.class=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat","-D","mapreduce.map.class=edu.ibu.ga.mapreduce.DgaMapper","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.DgaReducer","-D","mapred.output.value.class=org.apache.hadoop.io.NullWritable","-D","mapred.output.key.class=org.apache.hadoop.io.Text","-D","mapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome","-D","mapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable","-D","mapred.reduce.tasks=1","-D","ga.mapreduce.number.of.mappers=2","-D","mapred.input.dir=s3://dino.ga/input/","-D","mapreduce.output.fileoutputformat.outputdir=s3://dino.ga/output/dga/shix","-D","ga.mapreduce.population.size.per.node=50","-D","ga.mapreduce.chromosome.length=11224","-D","ga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.LimitedChromosomeGenerator","-D","ga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator","-D","ga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover","-D","ga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator","-D","ga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection","-D","ga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.MicroarrayFeatureSelectionSVMCSVFitnessFunction","-D","ga.mapreduce.microarray.train.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/leukemia2_train.csv","-D","ga.mapreduce.microarray.test.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/leukemia2_test.csv","-D","ga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria","-D","ga.mapreduce.number.of.generations=10","-D","ga.mapreduce.mutation.probability=0.05","-D","ga.mapreduce.crossover.probability=0.8","-D","io.serializations=org.apache.hadoop.io.serializer.JavaSerialization\,org.apache.hadoop.io.serializer.WritableSerialization"]



#run distributed ga job (dga-svm-kdd)
aws emr create-cluster --name "GL GA" --release-label emr-4.2.0 --log-uri s3://dino.ga/logs/ --enable-debugging --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m3.xlarge --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=CANCEL_AND_WAIT,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.DgaJob","-D","mapreduce.framework.name=yarn","-D","mapreduce.task.timeout=0","-D","mapreduce.inputformat.class=edu.ibu.ga.mapreduce.DgaInputFormat","-D","mapreduce.outputformat.class=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat","-D","mapreduce.map.class=edu.ibu.ga.mapreduce.DgaMapper","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.DgaReducer","-D","mapred.output.value.class=org.apache.hadoop.io.NullWritable","-D","mapred.output.key.class=org.apache.hadoop.io.Text","-D","mapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome","-D","mapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable","-D","mapred.reduce.tasks=1","-D","ga.mapreduce.number.of.mappers=2","-D","mapred.input.dir=s3://dino.ga/input/","-D","mapreduce.output.fileoutputformat.outputdir=s3://dino.ga/output/dga/kdd2","-D","ga.mapreduce.population.size.per.node=50","-D","ga.mapreduce.chromosome.length=41","-D","ga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.RandomChromosomeGenerator","-D","ga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator","-D","ga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover","-D","ga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator","-D","ga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection","-D","ga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.MicroarrayFeatureSelectionSVMCSVFitnessFunction","-D","ga.mapreduce.microarray.train.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/std-filtered-kdd-train.csv","-D","ga.mapreduce.microarray.test.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/std-filtered-kdd-test.csv","-D","ga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria","-D","ga.mapreduce.number.of.generations=50","-D","ga.mapreduce.mutation.probability=0.1","-D","ga.mapreduce.crossover.probability=0.9","-D","io.serializations=org.apache.hadoop.io.serializer.JavaSerialization\,org.apache.hadoop.io.serializer.WritableSerialization"]

#run distributed ga job (dga-tree-kdd)
aws emr create-cluster --name "GL GA" --release-label emr-4.2.0 --log-uri s3://dino.ga/logs/ --enable-debugging --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m3.xlarge --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=CANCEL_AND_WAIT,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.DgaJob","-D","mapreduce.framework.name=yarn","-D","mapreduce.task.timeout=0","-D","mapreduce.inputformat.class=edu.ibu.ga.mapreduce.DgaInputFormat","-D","mapreduce.outputformat.class=org.apache.hadoop.mapreduce.lib.output.TextOutputFormat","-D","mapreduce.map.class=edu.ibu.ga.mapreduce.DgaMapper","-D","mapreduce.reduce.class=edu.ibu.ga.mapreduce.DgaReducer","-D","mapred.output.value.class=org.apache.hadoop.io.NullWritable","-D","mapred.output.key.class=org.apache.hadoop.io.Text","-D","mapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome","-D","mapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable","-D","mapred.reduce.tasks=1","-D","ga.mapreduce.number.of.mappers=2","-D","mapred.input.dir=s3://dino.ga/input/","-D","mapreduce.output.fileoutputformat.outputdir=s3://dino.ga/output/dga/kdd3","-D","ga.mapreduce.population.size.per.node=50","-D","ga.mapreduce.chromosome.length=41","-D","ga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.RandomChromosomeGenerator","-D","ga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator","-D","ga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover","-D","ga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator","-D","ga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection","-D","ga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.RandomForestCSVFitnessFunction","-D","ga.mapreduce.microarray.train.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/std-filtered-kdd-train.csv","-D","ga.mapreduce.microarray.test.dataset=https://s3-us-west-1.amazonaws.com/dino.ga/datasets/std-filtered-kdd-test.csv","-D","ga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria","-D","ga.mapreduce.number.of.generations=50","-D","ga.mapreduce.mutation.probability=0.1","-D","ga.mapreduce.crossover.probability=0.9","-D","io.serializations=org.apache.hadoop.io.serializer.JavaSerialization\,org.apache.hadoop.io.serializer.WritableSerialization"]


#### rest is just junk
aws emr create-cluster --name "TestCLI" --release-label emr-4.2.0 --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m1.medium --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=TERMINATE_CLUSTER,Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.GaJob -Dio.serializations=org.apache.hadoop.io.serializer.JavaSerialization,org.apache.hadoop.io.serializer.WritableSerialization -Dmapreduce.inputformat.class=edu.ibu.ga.mapreduce.GaInputFormat -Dmapreduce.outputformat.class=edu.ibu.ga.mapreduce.GaOutputFormat -Dmapreduce.map.class=edu.ibu.ga.mapreduce.GaMapper -Dmapreduce.partitioner.class=edu.ibu.ga.mapreduce.RandomPartitioner -Dmapreduce.reduce.class=edu.ibu.ga.mapreduce.GaReducer -Dmapred.output.value.class=edu.ibu.ga.mapreduce.domain.Chromosome -Dmapred.output.key.class=org.apache.hadoop.io.NullWritable -Dmapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome -Dmapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable -Dmapred.reduce.tasks=2 -Dga.mapreduce.number.of.mappers=2 -Dmapred.input.dir=s3://dino.ga/data/input/ -Dga.mapreduce.output.location=s3://dino.ga/data/output/ -Dga.mapreduce.best.record.location=s3://dino.ga/data/best/ -Dga.mapreduce.generate.initial.population=true -Dga.mapreduce.window.size=10 -Dga.mapreduce.population.size=200 -Dga.mapreduce.chromosome.length=10 -Dga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.RandomChromosomeGenerator -Dga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator	 -Dga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover -Dga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator -Dga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection -Dga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.SimpleFitnessFunction -Dga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria -Dga.mapreduce.number.of.generations=5 -Dga.mapreduce.mutation.probability=0.05 -Dga.mapreduce.crossover.probability=0.8 -Dmapreduce.framework.name=yarn"]


aws emr create-cluster --name "TestCLI" --release-label emr-4.2.0 --applications Name=Hue Name=Hive Name=Pig --use-default-roles --ec2-attributes KeyName=dkeco --instance-type m1.medium --instance-count 1 --steps Type=CUSTOM_JAR,Name="Custom JAR Step",ActionOnFailure=TERMINATE_CLUSTER,
Jar=s3://dino.ga/dist-ga-01.00-job.jar,Args=["edu.ibu.ga.mapreduce.job.DgaJob","-conf","s3://dino.ga/conf/ga-conf-onemax-s3.xml"]


edu.ibu.ga.mapreduce.job.GaJob -Dio.serializations=org.apache.hadoop.io.serializer.JavaSerialization,org.apache.hadoop.io.serializer.WritableSerialization -Dmapreduce.inputformat.class=edu.ibu.ga.mapreduce.GaInputFormat -Dmapreduce.outputformat.class=edu.ibu.ga.mapreduce.GaOutputFormat -Dmapreduce.map.class=edu.ibu.ga.mapreduce.GaMapper -Dmapreduce.partitioner.class=edu.ibu.ga.mapreduce.RandomPartitioner -Dmapreduce.reduce.class=edu.ibu.ga.mapreduce.GaReducer -Dmapred.output.value.class=edu.ibu.ga.mapreduce.domain.Chromosome -Dmapred.output.key.class=org.apache.hadoop.io.NullWritable -Dmapred.mapoutput.value.class=edu.ibu.ga.mapreduce.domain.Chromosome -Dmapred.mapoutput.key.class=org.apache.hadoop.io.NullWritable -Dmapred.reduce.tasks=2 -Dga.mapreduce.number.of.mappers=2 -Dmapred.input.dir=s3://dino.ga/data/input/ -Dga.mapreduce.output.location=s3://dino.ga/data/output/ -Dga.mapreduce.best.record.location=s3://dino.ga/data/best/ -Dga.mapreduce.generate.initial.population=true -Dga.mapreduce.window.size=10 -Dga.mapreduce.population.size=200 -Dga.mapreduce.chromosome.length=10 -Dga.mapreduce.chromosome.generator=edu.ibu.ga.mapreduce.logic.RandomChromosomeGenerator -Dga.mapreduce.chromosome.comparator=edu.ibu.ga.mapreduce.logic.DefaultChromosomeComparator	 -Dga.mapreduce.crossover.operator=edu.ibu.ga.mapreduce.logic.SinglePointCrossover -Dga.mapreduce.mutation.operator=edu.ibu.ga.mapreduce.logic.StandardMutationOperator -Dga.mapreduce.selection.operator=edu.ibu.ga.mapreduce.logic.RouleteWheelSelection -Dga.mapreduce.fitness.function=edu.ibu.ga.mapreduce.logic.SimpleFitnessFunction -Dga.mapreduce.stop.criteria=edu.ibu.ga.mapreduce.logic.GenerationStopCriteria -Dga.mapreduce.number.of.generations=5 -Dga.mapreduce.mutation.probability=0.05 -Dga.mapreduce.crossover.probability=0.8 -Dmapreduce.framework.name=yarn


--log-uri s3://dino.ga/logs/